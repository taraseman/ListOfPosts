(this.webpackJsonpposts=this.webpackJsonpposts||[]).push([[0],{26:function(t,e,c){},33:function(t,e,c){},34:function(t,e,c){},35:function(t,e,c){},37:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c.n(n),i=c(8),a=c(19),o=c.n(a),r=(c(26),c(4)),l=c(2),j="https://jsonplaceholder.typicode.com",b=c(0),u=function(){var t=Object(n.useState)([]),e=Object(r.a)(t,2),c=e[0],s=e[1],i=Object(l.g)(),a=Object(l.f)(),o=new URLSearchParams(i.search);Object(n.useEffect)((function(){fetch("".concat(j,"/users")).then((function(t){return t.json()})).then((function(t){s(t)}))}),[]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"title",children:"People"}),Object(b.jsxs)("table",{className:"table is-fullwidth is-bordered",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"id"}),Object(b.jsx)("th",{children:"name"}),Object(b.jsx)("th",{children:"email"}),Object(b.jsx)("th",{children:"phone"}),Object(b.jsx)("th",{children:"posts"})]})}),Object(b.jsx)("tbody",{children:c.map((function(t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.id}),Object(b.jsx)("td",{children:t.name}),Object(b.jsx)("td",{children:t.email}),Object(b.jsx)("td",{children:t.phone}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{type:"button",className:"PostsList__button button is-info",onClick:function(){var e,c;e=t.id,c=t.name,o.set("user-name",c),a.push("".concat(e,"?").concat(o.toString()))},children:"Posts"})})]},t.id)}))})]})]})},d=c(21),h=(c(33),function(t){var e=t.trigger,c=t.children,n=t.setPopupVisibility;return e?Object(b.jsx)("div",{className:"popup",children:Object(b.jsxs)("div",{className:"popup__inner",children:[Object(b.jsx)("button",{className:"popup__button",type:"button",onClick:function(){n(!1)},children:"X"}),c]})}):""}),O=s.a.createContext({posts:[],setPosts:function(){}}),m=(c(34),function(){var t=Object(l.h)("/:userId"),e=t.params.userId,c=Object(n.useState)(!1),s=Object(r.a)(c,2),i=s[0],a=s[1],o=Object(n.useState)(""),u=Object(r.a)(o,2),m=u[0],p=u[1],x=Object(n.useState)(""),f=Object(r.a)(x,2),N=f[0],v=f[1],y=Object(l.g)(),g=Object(l.f)(),S=new URLSearchParams(y.search),_=S.get("user-name"),C=Object(n.useContext)(O),P=C.posts,w=C.setPosts;Object(n.useEffect)((function(){var t;(t=e,fetch("".concat(j,"/posts?userId=").concat(t)).then((function(t){return t.json()}))).then((function(t){P.length>0?w(P):w(t)}))}),[]);return Object(b.jsxs)("article",{className:"user-posts",children:[Object(b.jsx)("h1",{className:"title",children:"".concat(_," posts:")}),Object(b.jsx)("hr",{}),Object(b.jsx)("ul",{children:P.map((function(e){return Object(b.jsxs)("li",{className:"box",children:[Object(b.jsx)("h2",{className:"title",children:e.title}),Object(b.jsx)("p",{className:"text",children:e.body}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"button",className:"button",onClick:function(){return c=e.id,S.set("postId",c),void g.push("/info".concat(t.url,"/?").concat(S.toString()));var c},children:"DETAILS"}),Object(b.jsx)("br",{})]},e.id)}))}),Object(b.jsx)("button",{type:"button",className:"button is-medium is-fullwidth is-info user-posts__button",onClick:function(){return a(!0)},children:"Add new"}),Object(b.jsxs)(h,{trigger:i,setPopupVisibility:a,children:[Object(b.jsx)("h3",{className:"title",children:"Add new post"}),Object(b.jsxs)("form",{onSubmit:function(t){var c;t.preventDefault(),a(!1),(c={userId:e,title:m,body:N},fetch("".concat(j,"/posts"),{method:"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json;charset=UTF-8"}}).then((function(t){return t.json()}))).then((function(t){w([].concat(Object(d.a)(P),[t]))})),p(""),v("")},children:[Object(b.jsx)("label",{className:"label",htmlFor:"title-1",children:"Title"}),Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("input",{id:"title-1",className:"input",type:"text",placeholder:"write your title...",value:m,onChange:function(t){p(t.target.value)},required:!0})}),Object(b.jsx)("label",{className:"label",htmlFor:"textarea-1",children:"Post"}),Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("textarea",{id:"textarea-1",className:"textarea",type:"email",placeholder:"write your post...",value:N,onChange:function(t){v(t.target.value)},required:!0})}),Object(b.jsx)("button",{type:"submit",className:"button is-medium is-fullwidth is-info",children:"Send"})]})]})]})}),p=c(17),x=(c(35),function(){var t=Object(n.useContext)(O),e=t.posts,c=t.setPosts,s=Object(n.useState)({}),a=Object(r.a)(s,2),o=a[0],u=a[1],d=Object(n.useState)([]),m=Object(r.a)(d,2),x=m[0],f=m[1],N=Object(l.g)(),v=Object(n.useState)(!1),y=Object(r.a)(v,2),g=y[0],S=y[1],_=Object(n.useState)(""),C=Object(r.a)(_,2),P=C[0],w=C[1],E=Object(n.useState)(""),I=Object(r.a)(E,2),T=I[0],k=I[1],F=new URLSearchParams(N.search),L=F.get("postId"),U=F.get("user-name");Object(n.useEffect)((function(){!function(t){fetch("".concat(j,"/posts/").concat(t)).then((function(t){return t.json()}))}(L);var t=e.find((function(t){return t.id===+L}));u(t),function(t){return fetch("".concat(j,"/comments?postId=").concat(t)).then((function(t){return t.json()}))}(L).then((function(t){return f(t)}))}),[]);var D=function(t){!function(t){fetch("https://jsonplaceholder.typicode.com/posts/".concat(t),{method:"DELETE"})}(t),c(e.filter((function(e){return e.id!==+t})))};return Object(b.jsxs)("article",{className:"post",children:[Object(b.jsx)(i.b,{to:"/",className:"post__link-to-home",children:"HOME"}),Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("article",{className:"media",children:Object(b.jsx)("div",{className:"media-content",children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"".concat(o.title)}),Object(b.jsx)("br",{}),o.body,Object(b.jsx)("p",{className:"post__user-name",children:Object(b.jsx)("small",{children:"".concat(U," [#").concat(o.userId,"]")})})]})})})}),Object(b.jsx)("button",{type:"button",className:"button is-small is-info post__button",onClick:function(){return t=o.title,e=o.body,w(t),k(e),void S(!0);var t,e},children:"EDIT"}),Object(b.jsx)(i.b,{to:"/",children:Object(b.jsx)("button",{type:"button",className:"button is-small is-info is-light post__button",onClick:function(){return D(o.id)},children:"DELETE"})})]}),Object(b.jsx)("h2",{className:"title is-4",children:"Comments:"}),Object(b.jsx)("ul",{className:"post__comments",children:x.map((function(t){return Object(b.jsxs)("li",{className:"box",children:[Object(b.jsx)("strong",{children:t.name}),Object(b.jsx)("p",{children:t.body}),Object(b.jsx)("a",{href:"mailto:".concat(t.email),children:t.email})]},t.id)}))}),Object(b.jsxs)(h,{trigger:g,setPopupVisibility:S,children:[Object(b.jsx)("h3",{className:"title",children:"Edit"}),Object(b.jsxs)("form",{onSubmit:function(){var t;(t=Object(p.a)(Object(p.a)({},o),{},{title:P,body:T}),fetch("".concat(j,"/posts/").concat(t.id),{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(t){return t.json()}))).then((function(t){u(t),c(e.map((function(e){return e.id===+L?t:e}))),S(!1)}))},children:[Object(b.jsx)("label",{className:"label",htmlFor:"title-11",children:"Title"}),Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("input",{id:"title-11",className:"input",type:"text",placeholder:"write your title...",value:P,onChange:function(t){return w(t.target.value)},required:!0})}),Object(b.jsx)("label",{className:"label",htmlFor:"textarea-11",children:"Comment"}),Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("textarea",{id:"textarea-11",className:"textarea",type:"email",placeholder:"write your comment...",value:T,onChange:function(t){return k(t.target.value)},required:!0})}),Object(b.jsx)("button",{type:"submit",className:"button is-medium is-fullwidth is-info",children:"Send"})]})]})]})});c(36);var f=function(){var t=Object(n.useState)([]),e=Object(r.a)(t,2),c=e[0],s=e[1],i=Object(n.useMemo)((function(){return{posts:c,setPosts:s}}),[c]);return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(O.Provider,{value:i,children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{path:"/",component:u,exact:!0}),Object(b.jsx)(l.a,{path:"/info",component:x}),Object(b.jsx)(l.a,{path:"/",component:m})]})})})};o.a.render(Object(b.jsx)(i.a,{children:Object(b.jsx)(f,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.fdae728d.chunk.js.map