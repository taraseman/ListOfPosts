(this.webpackJsonpposts=this.webpackJsonpposts||[]).push([[0],{26:function(t,e,c){},33:function(t,e,c){},34:function(t,e,c){},35:function(t,e,c){},37:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c.n(n),i=c(8),o=c(19),r=c.n(o),a=(c(26),c(4)),l=c(2),j="https://jsonplaceholder.typicode.com",u=c(0),b=function(){var t=Object(n.useState)([]),e=Object(a.a)(t,2),c=e[0],s=e[1],i=Object(l.g)(),o=Object(l.f)(),r=new URLSearchParams(i.search);Object(n.useEffect)((function(){fetch("".concat(j,"/users")).then((function(t){return t.json()})).catch((function(t){throw new Error(t)})).then((function(t){s(t)}))}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"title",children:"People"}),Object(u.jsxs)("table",{className:"table is-fullwidth  is-narrow",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"name"}),Object(u.jsx)("th",{children:"email"}),Object(u.jsx)("th",{children:"phone"}),Object(u.jsx)("th",{children:"posts"})]})}),Object(u.jsx)("tbody",{children:c.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"#".concat(t.id)}),Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.email}),Object(u.jsx)("td",{children:t.phone}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{type:"button",className:"PostsList__button button is-info",onClick:function(){var e,c;e=t.id,c=t.name,r.set("user-name",c),o.push("".concat(e,"?").concat(r.toString()))},children:"Posts"})})]},t.id)}))})]})]})},h=c(21),d=(c(33),function(t){var e=t.trigger,c=t.children,n=t.setPopupVisibility;return e?Object(u.jsx)("div",{className:"popup",children:Object(u.jsxs)("div",{className:"popup__inner",children:[Object(u.jsx)("button",{className:"popup__button",type:"button",onClick:function(){n(!1)},children:"X"}),c]})}):""}),O=s.a.createContext({posts:[],setPosts:function(){}}),m=(c(34),function(){var t=Object(l.h)("/:userId"),e=t.params.userId,c=Object(n.useState)(!1),s=Object(a.a)(c,2),i=s[0],o=s[1],r=Object(n.useState)(""),b=Object(a.a)(r,2),m=b[0],p=b[1],x=Object(n.useState)(""),f=Object(a.a)(x,2),N=f[0],v=f[1],y=Object(l.g)(),w=Object(l.f)(),g=new URLSearchParams(y.search),S=g.get("user-name"),E=Object(n.useContext)(O),C=E.posts,_=E.setPosts;Object(n.useEffect)((function(){var t;(t=e,fetch("".concat(j,"/posts?userId=").concat(t)).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))).then((function(t){C.length>0?_(C):_(t)}))}),[]);return Object(u.jsxs)("article",{className:"user-posts",children:[Object(u.jsx)("h1",{className:"title",children:"".concat(S," posts:")}),Object(u.jsx)("hr",{}),Object(u.jsx)("ul",{children:C.map((function(e){return Object(u.jsxs)("li",{className:"box",children:[Object(u.jsx)("h2",{className:"title",children:e.title}),Object(u.jsx)("p",{className:"text",children:e.body}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",className:"button",onClick:function(){return c=e.id,g.set("postId",c),void w.push("/info".concat(t.url,"/?").concat(g.toString()));var c},children:"DETAILS"}),Object(u.jsx)("br",{})]},e.id)}))}),Object(u.jsx)("button",{type:"button",className:"button is-medium is-fullwidth is-info user-posts__button",onClick:function(){return o(!0)},children:"Add new"}),Object(u.jsxs)(d,{trigger:i,setPopupVisibility:o,children:[Object(u.jsx)("h3",{className:"title",children:"Add new post"}),Object(u.jsxs)("form",{onSubmit:function(t){var c;t.preventDefault(),o(!1),(c={userId:e,title:m,body:N},fetch("".concat(j,"/posts"),{method:"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json;charset=UTF-8"}}).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))).then((function(t){_([].concat(Object(h.a)(C),[t]))})),p(""),v("")},children:[Object(u.jsx)("label",{className:"label",htmlFor:"title-1",children:"Title"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{id:"title-1",className:"input",type:"text",placeholder:"write your title...",value:m,onChange:function(t){p(t.target.value)},required:!0})}),Object(u.jsx)("label",{className:"label",htmlFor:"textarea-1",children:"Post"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("textarea",{id:"textarea-1",className:"textarea",type:"email",placeholder:"write your post...",value:N,onChange:function(t){v(t.target.value)},required:!0})}),Object(u.jsx)("button",{type:"submit",className:"button is-medium is-fullwidth is-info",children:"Send"})]})]})]})}),p=c(17),x=(c(35),function(){var t=Object(n.useContext)(O),e=t.posts,c=t.setPosts,s=Object(n.useState)({}),o=Object(a.a)(s,2),r=o[0],b=o[1],h=Object(n.useState)([]),m=Object(a.a)(h,2),x=m[0],f=m[1],N=Object(l.g)(),v=Object(n.useState)(!1),y=Object(a.a)(v,2),w=y[0],g=y[1],S=Object(n.useState)(""),E=Object(a.a)(S,2),C=E[0],_=E[1],P=Object(n.useState)(""),I=Object(a.a)(P,2),k=I[0],T=I[1],F=new URLSearchParams(N.search),L=F.get("postId"),D=F.get("user-name");Object(n.useEffect)((function(){!function(t){fetch("".concat(j,"/posts/").concat(t)).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}(L);var t=e.find((function(t){return t.id===+L}));b(t),function(t){return fetch("".concat(j,"/comments?postId=").concat(t)).then((function(t){return t.json()})).catch((function(t){throw new Error(t)}))}(L).then((function(t){return f(t)}))}),[]);var U=Object(n.useCallback)((function(t){!function(t){fetch("https://jsonplaceholder.typicode.com/posts/".concat(t),{method:"DELETE"}).catch((function(t){throw new Error(t)}))}(t),c(e.filter((function(e){return e.id!==+t})))}));return Object(u.jsxs)("article",{className:"post",children:[Object(u.jsx)(i.b,{to:"/",className:"post__link-to-home",children:"HOME"}),Object(u.jsxs)("div",{className:"box",children:[Object(u.jsx)("article",{className:"media",children:Object(u.jsx)("div",{className:"media-content",children:Object(u.jsx)("div",{className:"content",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"".concat(r.title)}),Object(u.jsx)("br",{}),r.body,Object(u.jsx)("p",{className:"post__user-name",children:Object(u.jsx)("small",{children:"".concat(D," [#").concat(r.userId,"]")})})]})})})}),Object(u.jsx)("button",{type:"button",className:"button is-small is-info post__button",onClick:function(){return t=r.title,e=r.body,_(t),T(e),void g(!0);var t,e},children:"EDIT"}),Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("button",{type:"button",className:"button is-small is-info is-light post__button",onClick:function(){return U(r.id)},children:"DELETE"})})]}),Object(u.jsx)("h2",{className:"title is-4",children:"Comments:"}),Object(u.jsx)("ul",{className:"post__comments",children:x.map((function(t){return Object(u.jsxs)("li",{className:"box",children:[Object(u.jsx)("strong",{children:t.name}),Object(u.jsx)("p",{children:t.body}),Object(u.jsx)("a",{href:"mailto:".concat(t.email),children:t.email})]},t.id)}))}),Object(u.jsxs)(d,{trigger:w,setPopupVisibility:g,children:[Object(u.jsx)("h3",{className:"title",children:"Edit"}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n,s=Object(p.a)(Object(p.a)({},r),{},{title:C,body:k});(n=s,fetch("".concat(j,"/posts/").concat(+n.id),{method:"PUT",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(t){return t.json()})).then((function(t){return window.console.log(t)})).catch((function(t){throw new Error(t)}))).then((function(){b(s),c(e.map((function(t){return t.id===+L?s:t}))),g(!1)}))},children:[Object(u.jsx)("label",{className:"label",htmlFor:"title-11",children:"Title"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{id:"title-11",className:"input",type:"text",placeholder:"write your title...",value:C,onChange:function(t){return _(t.target.value)},required:!0})}),Object(u.jsx)("label",{className:"label",htmlFor:"textarea-11",children:"Comment"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("textarea",{id:"textarea-11",className:"textarea",type:"email",placeholder:"write your comment...",value:k,onChange:function(t){return T(t.target.value)},required:!0})}),Object(u.jsx)("button",{type:"submit",className:"button is-medium is-fullwidth is-info",children:"Send"})]})]})]})});c(36);var f=function(){var t=Object(n.useState)([]),e=Object(a.a)(t,2),c=e[0],s=e[1],i=Object(n.useMemo)((function(){return{posts:c,setPosts:s}}),[c]);return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(O.Provider,{value:i,children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/",component:b,exact:!0}),Object(u.jsx)(l.a,{path:"/info",component:x}),Object(u.jsx)(l.a,{path:"/",component:m})]})})})};r.a.render(Object(u.jsx)(i.a,{children:Object(u.jsx)(f,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.5668466d.chunk.js.map